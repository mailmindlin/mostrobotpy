---
extra_includes:
  - rpy/geometryToString.h
  - wpystruct.h
  - pybind11/eigen.h

functions:
  to_json:
    ignore: true
  from_json:
    ignore: true
classes:
  Translation3d:
    shared_ptr: false
    methods:
      Translation3d:
        overloads:
          '[constexpr]':
          units::meter_t, units::meter_t, units::meter_t [constexpr]:
          units::meter_t, const Rotation3d&:
          const Eigen::Vector3d&:
      Distance:
      X:
      Y:
      Z:
      ToVector:
      Norm:
      RotateBy:
      ToTranslation2d:
      operator+:
      operator-:
        overloads:
          const Translation3d& [const]:
          '[const]':
      operator*:
      operator/:
      operator==:
      operator!=:

inline_code: |
  cls_Translation3d
    .def_static("fromFeet", [](units::foot_t x, units::foot_t y, units::foot_t z){
      return std::make_unique<Translation3d>(x, y, z);
    }, py::arg("x"), py::arg("y"), py::arg("z"))
    .def_property_readonly("x", &Translation3d::X)
    .def_property_readonly("y", &Translation3d::Y)
    .def_property_readonly("z", &Translation3d::Z)
    .def_property_readonly("x_feet", [](const Translation3d * self) -> units::foot_t {
      return self->X();
    })
    .def_property_readonly("y_feet", [](const Translation3d * self) -> units::foot_t {
      return self->Y();
    })
    .def_property_readonly("z_feet", [](const Translation3d * self) -> units::foot_t {
      return self->Z();
    })
    .def("distanceFeet", [](Translation3d * self, const Translation3d &other) -> units::foot_t {
      return self->Distance(other);
    })
    .def("normFeet", [](const Translation3d * self) -> units::foot_t {
      return self->Norm();
    })
    .def("__abs__", &Translation3d::Norm)
    .def("__len__", [](const Translation3d& self) { return 3; })
    .def("__getitem__", [](const Translation3d& self, int index) {
      switch (index) {
        case 0:
          return self.X();
        case 1:
          return self.Y();
        case 2:
          return self.Z();
        default:
          throw std::out_of_range("Translation3d index out of range");
      }
    })
    .def("__repr__", py::overload_cast<const Translation3d&>(&rpy::toString))
    .def(py::pickle(
        [](const Translation3d &self) { // __getstate__
            return py::make_tuple(self.X(), self.Y(), self.Z());
        },
        [](py::tuple t) { // __setstate__
            if (t.size() != 3)
                throw std::runtime_error("Invalid state!");
            
            return Translation3d(
              t[0].cast<units::meter_t>(),
              t[1].cast<units::meter_t>(),
              t[2].cast<units::meter_t>()
            );
        }
    ))
  ;

  SetupWPyStruct<frc::Translation3d>(cls_Translation3d);
